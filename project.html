<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Title for the page -->
    <title>Josh's Project</title>

    <!-- Link to my style sheet -->
    <link rel="stylesheet" href="project.css">

    <!--The next three lines allow the Vega embed-->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
</head>

<!--END HEAD-->

<!--START BODY -->

<body>

 <!--Navigation bar and title-->
 <container class="hcontainer">

    <header>
      <h1>DataScience </h1>
      <h2>Josh Shah | ECON30006</h2>
    </header>
    
    </container>
    
    
    <!-- /////////////////// NAVIGATION BUTTONS //////////////////////////////////// -->
    <container class="hcontainer" style="border-bottom: none;">
    <div class="multi-button">
    
      <button onclick="location.href='index.html'">Home</button>
      <button onclick="location.href='portfolio.html'">Portfolio</button>
      <button style="color: rgb(17, 143, 242);" onclick="location.href='project.html'">Project</button>
      <button onclick="location.href='https://github.com/josh-shah/josh-shah.github.io'">github</button>
      
    
    </div>
    </container>   



    <!-- /////////////////// INTRO TEXT //////////////////////////////////// -->
<h3>Football: <span style="font-weight: 500; color: white;">The impact of Investment on the Premier League</span></h3>
<p class="project-page-text">
  Manchester City won the 21/22 Premier League season having spent £868M on players in 5 seasons. Meanwhile, Leeds have spent £277M in 5 seasons and only narrowly avoided relegation. With PL Clubs' <a style="color: rgb(19, 143, 242);" href="https://theathletic.com/3516609/2022/08/17/premier-league-revenues-finances-europe/ 
  ">£4.9Bn</a> income last season, and the PL contributing £7.6Bn to the UK economy in 2020, the league is immensely lucrative.</p>
  <p class="project-page-text">This project aims to investigate the link between Money and Success in Premier League Football.</p>

<!-- /////////////////// SECTION 1 //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">
<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Section 1: </span>Player Expenditures by Club</p>
<container class="bcontainer-project">

<!--Section 1 Charts -->
<p class="project-page-text">
  In Figure 1, I used <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/Kmeansclustering_Spendvsrank.ipynb">Python</a> to conduct Unsupervised Machine Learning (K-Means Clustering) to cluster teams based on investment levels. The graph indicates a clear relationship between spending and league position, with the bottom left quarter of the chart being optimal; low expenditure, strong ranking. 
</p>
  </p>
<div class="chart-project-section1" id="Chart25"></div>
<div class="chart-project-section1" id="Chart26"></div>
<p class="project-page-text">
  In Figures 1+2, I used and cleaned raw Excel files privately obtained from Transfermarkt for expenditures (some data was also manually entered). 
  Transfermarkt regularly change the code needed to scrape their website, making the code hard to replicate, but their data is reliable. 
  I also used Kaggle (<a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/EPL%20Standings%202000-2022.csv">csv</a>) for league rankings, which I cleaned using <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/PROJECTEPLPOINTS.ipynb">Colab</a>.
  </p>
</container>

<!-- /////////////////// SECTION 2 //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">
<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Section 2: </span>Is there a link between Player Wages and Player Market Value? </p>
<container class="bcontainer-project">
  <p class="project-page-text">Figure 3 demonstrates a weak relationship between player market values and weekly wages. An R<sup>2</sup> of 0.37 suggests only 37% of the variation in Market Values can be explained by changes in wages. (N.B. click on the colour icons to focus by club). </p>

    <p class="project-page-text">The data was obtained through 2 sources. Firstly, I used <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/CapologyScrape.ipynb">Python</a> to scrape Capology and obtain wage <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/all_premier-league_2022-2023_last_updated_15112022.csv">data</a> for each team by concatenation. This website was hard to scrape and required extensive <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/CapologyWageDataCleaning.ipynb">cleaning</a> to create <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/capology_clean.csv">this</a>. Secondly, I used Transfermarkt’s estimated market value <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/2022-11-15_Squads_GB1.csv">data</a>, obtained privately. I then merged these two datasets, using <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/MKT_VALUEvsWAGESMERGE.ipynb">Colab</a>, removing any players with missing data (eg. low-profile Summer 2022 transfers).</p>
<br>
  <div class="chart-project-section1" id="Chart27"></div>
  <div class="chart-project-section1" id="Chart28"></div>
  <p class="project-page-text">Using Excel, I then grouped this data by club (Figure 4), to investigate whether a club’s wage bill matches their players’ aggregated market values. Chelsea’s wage line peaks above the bar, suggesting they’re overpaying players relative to their market values.</p>



</container>

<!-- /////////////////// SECTION 3 //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">

<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Section 3: </span>Extortionate Transfer Fees </p>
<container class="bcontainer-project">

  <div class="chart-project-section1" id="Chart29"></div>
<p class="project-page-text">
  Figure 5 highlights the drastic difference in inflation between the Transfer Price Index (sourced from Tomkins Times ©) and UK's Consumer Price Index (from Bank of England). I manually inputted this into Excel due to inconsistencies in site design. 1992 is set as the base year for both Indexes to make their growth easily comparable.
</p>


</container>

<!-- /////////////////// SECTION 4 //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">
<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Section 4: </span>The Premier League's Global Investment Appeal </p>
<container class="bcontainer-project">
<p class="project-page-text">Figure 6 indicates the 'Top 6' PL teams unsurprisingly dominate the world, with Manchester United and Liverpool being the most popular PL teams worldwide. I used the pytrends API package to batch download Google Trends’ search query data on 250 countries using <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/PROJECT_GoogleTrends_WorldPLMap.ipynb">Colab</a>. This code can be re-run for automatic updates. Without pytrends, I received 'Error 429' on a <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/GoogleTrends_Error_Loop.ipynb">loop</a>, despite inputting sleep commands. Countries like North Korea didn't have accessible data. </p>
<br>
  <div class="chart-project-section1" id="Chart30"></div>
  <div class="chart-project-section1" id="Chart31"></div>
<p class="project-page-text">The PL invests in Fantasy Premier League, an international game, to increase global engagement. As Manchester United and Liverpool dominate fanbases worldwide, I wanted to investigate the correlation between FPL players' performance and popularity. Manchester United underperformed in the 21-22 season, so I tested whether their players were popular despite offering bad value.</p>

<p class="project-page-text">Figure 7 is a bubble chart to enable sizing the bubbles based on FPL player prices; since they overlap, you can focus by team. Cristiano Ronaldo and Bruno Fernandes, key Manchester United players, presented poor value yet were still owned by around 15% of FPL players. I used Vaastav's Github data; the FPL API only has current season data.</p>
</container>

<!-- /////////////////// SECTION 5 //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">
<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Section 5: </span>Relationship between stock prices and points </p>
<container class="bcontainer-project">

  <div class="chart-project-section1" id="Chart32"></div>
  <p class="project-page-text">
Figure 8's data was retrieved using yfinance - a package which accesses the Yahoo Finance API via <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/ManUstocks.ipynb">Colab</a>.
This can be re-run annually for updates. 
Manchester United are the only publicly listed PL Club, and 
I investigated if their stock prices are indicative of their club value and therefore the level of Investment available. 
This suggests a clear correlation between Man United's average stock price and league points 
(<a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/EPLPoints2000_2022.csv">csv</a>), in a year (2012+2013 data excluded as outliers, due to uncertainty surrounding a new stock). I expect this relationship to strengthen as more data is added.
  
  </p>

</container>

<!-- /////////////////// CONCLUSION //////////////////////////////////// -->
<hr size="5" width="100%" color="white" style="margin-top: 75px;">
<p class="bodyText" style="font-size: 30px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Conclusion: </span>What does this tell us?</p>

<container class="bcontainer-project">

<p class="project-page-text"> Overall, there's a clear link between expenditure and success in the Premier League. Unsurprisingly, the more a team spends, the better they tend to perform, thus widening the gap between the Top 6 PL teams and the rest. Newcastle were recently bought by motivated Saudi Investors, already looking to break into the Top 6 this season which reinforces the link. However, there are anomalies; Brentford have managed to get mid-table finishes with little investment, due to their data-driven analytics approach, allowing them to recruit efficiently.</p>
  <p class="project-page-text"> Further work can be done to account for Players' market values and wages based on age, position, or a Team's history (some clubs have academies which feed young talent into the team, saving them recruitment costs).
 Also, I will run the FPL API at the end of the season <a style="color: rgb(19, 143, 242);" href="https://github.com/josh-shah/josh-shah.github.io/blob/main/FPL_API.ipynb">here</a> to see whether players from popular teams present bad value, but high ownership levels.</p>

</container>
<!-- END CONCLUSION-->

<!-- Data and References-->

<footer style="text-align: center;">

  <hr size="5" width="100%" color="white" style="margin-top: 75px;">
  <p class="bodyText" style="font-size: 23px;"><span style="color: rgb(19, 143, 242); font-weight: 700;">Data and References: </span></p>
  <br>
  <p class="project-page-text" style="font-size: 15px;">
    Section 1 Sources: <a style="color: rgb(19, 143, 242);" href="https://www.kaggle.com/datasets/quadeer15sh/premier-league-standings-11-seasons-20102021">Kaggle Dataset</a>, <a target="_blank" style="color: rgb(19, 143, 242);" href="https://www.transfermarkt.co.uk/">Transfermarkt</a>
    <br>
    Section 2 Sources: <a target="_blank" style="color: rgb(19, 143, 242);" href="https://www.transfermarkt.co.uk/">Transfermarkt</a>, <a target="_blank" style="color: rgb(19, 143, 242);" href="https://capology.com/uk/premier-league/salaries/">Capology</a>
    <br>
    Section 3 Sources: <a target="_blank" style="color: rgb(19, 143, 242);" href="https://tomkinstimes.com/debate/transfer-price-index-the-complete-guide/">Tomkins Times</a>, <a target="_blank" style="color: rgb(19, 143, 242);" href="https://www.bankofengland.co.uk/monetary-policy/inflation/inflation-calculator">Bank of England Inflation Calculator</a>
    <br>
    Section 4 Sources: <a target="_blank" style="color: rgb(19, 143, 242);" href="https://pypi.org/project/pytrends/">pytrends</a>, <a target="_blank" style="color: rgb(19, 143, 242);" href="https://github.com/vaastav/Fantasy-Premier-League/blob/master/data/2021-22/cleaned_players.csv">Vaastav via Github</a>
    <br>
    Section 5 Sources: <a target="_blank" style="color: rgb(19, 143, 242);" href="https://pypi.org/project/yfinance/">yfinance</a>
    <br>

    <br><br><br>  
  </p>

</footer>



</body>

<script>
  //Define charts:
  var myChart25 = "clubs_cluster_project.json";
  var myChart26 = "expenditure_season.json";
  var myChart27 = "MktValuevsWage.json";
  var myChart28 = "MktValuevsWage_club.json";
  var myChart29 = "TPIvsUKInflation.json";
  var myChart30 = "map_PLpopularteams_project.json";
  var myChart31= "FPL_Value_Ownership.json";
  var myChart32= "ManUstocks.json";


  // Embed charts:
  vegaEmbed('#Chart25', myChart25);
  vegaEmbed('#Chart26', myChart26);
  vegaEmbed('#Chart27', myChart27);
  vegaEmbed('#Chart28', myChart28);
  vegaEmbed('#Chart29', myChart29);
  vegaEmbed('#Chart30', myChart30);
  vegaEmbed('#Chart31', myChart31);
  vegaEmbed('#Chart32', myChart32);
  
  
</script>
  


</html>